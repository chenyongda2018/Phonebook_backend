(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var o=t(16),c=t.n(o),r=t(17),a=t(7),i=t(3),u=t(2),l=t(4),s=t.n(l),d="/api/persons/",j=function(){return s.a.get(d)},b=function(e){return s.a.post(d,e)},f=function(e){return s.a.delete(d.concat(e))},h=function(e,n){return s.a.put(d.concat(e),n)},O=t(0),m=function(e){var n=e.message,t=e.errorMsg;return null==n&&null==t?null:null!=n?Object(O.jsx)("div",{style:{color:"green",background:"lightgray",padding:15,borderStyle:"solid",borderRadius:5,fontSize:20,marginBottom:20},children:n}):null!=t?Object(O.jsx)("div",{style:{color:"red",background:"lightgray",fontSize:20,borderStyle:"solid",padding:10,marginBottom:10},children:t}):void 0},p=(t(41),function(e){var n=e.persons,t=e.delPhone;return Object(O.jsxs)("div",{children:[Object(O.jsx)("h3",{children:"Numbers"}),Object(O.jsx)("ul",{children:n.map((function(e,n){return Object(O.jsx)("li",{children:Object(O.jsx)(g,{person:e,delPhone:function(){t(e)}})},n)}))})]})}),g=function(e){var n=e.person,t=e.delPhone;return Object(O.jsxs)("p",{children:[n.name," : ",n.number,Object(O.jsx)("button",{onClick:t,children:"Delete"})]})},v=function(){var e=Object(u.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],c=Object(u.useState)(""),l=Object(i.a)(c,2),s=l[0],d=l[1],g=Object(u.useState)(""),v=Object(i.a)(g,2),x=v[0],w=v[1],y=Object(u.useState)(""),S=Object(i.a)(y,2),k=S[0],C=S[1],P=Object(u.useState)(null),B=Object(i.a)(P,2),D=B[0],A=B[1],T=Object(u.useState)(null),z=Object(i.a)(T,2),E=z[0],I=z[1],J=""===k?t:t.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())}));Object(u.useEffect)((function(){console.log("fetchData called"),j().then((function(e){console.log("response: ",e.data),o(e.data)}))}),[]);var L=function(e){var n,o=Object(r.a)(t);try{for(o.s();!(n=o.n()).done;){if(n.value.name===e)return!0}}catch(c){o.e(c)}finally{o.f()}return!1},M=function(e){A(e),setTimeout((function(){A(null)}),5e3)},N=function(e){I(e),setTimeout((function(){I(null)}),5e3)};return Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"Phone book"}),Object(O.jsx)(m,{message:D,errorMsg:E}),Object(O.jsxs)("div",{children:["fliter show with ",Object(O.jsx)("input",{onChange:function(e){C(e.target.value)}})]}),Object(O.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),L(s)){if(window.confirm("".concat(s," was already added in the PhoneBook,replace the old number with a new one?"))){var n=t.find((function(e){return e.name===s})),c=Object(a.a)(Object(a.a)({},n),{},{number:x});h(n.id,c).then((function(e){console.log("update User: ",e.data),M("Updated ".concat(c.name)),o(t.map((function(t){return t.id===n.id?e.data:t})))})).catch((function(e){N("Infomation of ".concat(c.name," has already removed from the server"))}))}}else b({name:s,number:x}).then((function(e){console.log("addNote rsp: ",e.data),M("Added ".concat(s)),o(t.concat(e.data))}));d(""),w("")},children:[Object(O.jsx)("h3",{children:"Add a new "}),Object(O.jsxs)("div",{children:["name:",Object(O.jsx)("input",{value:s,onChange:function(e){d(e.target.value)}})]}),Object(O.jsxs)("div",{children:["Tel:",Object(O.jsx)("input",{value:x,onChange:function(e){w(e.target.value)}})]}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{type:"submit",children:"Add"})})]}),Object(O.jsx)(p,{persons:J,delPhone:function(e){window.confirm("Delete ".concat(e.name," ?"))&&(f(e.id).then((function(e){console.log("del phone rsp: ",e.data)})),o(t.filter((function(n){return n.id!==e.id}))))}})]})};c.a.render(Object(O.jsx)(v,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.f505b9dd.chunk.js.map